local Player = game:GetService("Players").LocalPlayer

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Luna's GUI | I SUPPORT LGBTQIA+ |", "GrapeTheme")

local ATab = Window:NewTab("Autofarm")
local ASection = ATab:NewSection("Autofarm")

local Enemies = workspace.Enemies:GetDescendants()
local Mobs = {}

for i,v in pairs(Enemies) do
if v:IsA("ObjectValue") and v.Parent.Name == "Enemy" and v.Parent:IsA("Model") and v.Name == "Model" then
    if not table.find(Mobs,tostring(v.Value)) then
        table.insert(Mobs,tostring(v.Value))
    end
end
end

ASection:NewDropdown("Teleport To Mob", "Teleports you to the mob selected once(repeatable)", Mobs, function(CurrentOption)
local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
local Enemies = workspace.Enemies:GetDescendants()
   for i,v in next, Enemies do 
      if v.Parent.Name == "Enemy" and v:IsA("BasePart") and v.Name == "EnemyLocation" and tostring(v.Parent.Model.Value) == CurrentOption and v.Parent.InCombat.Value == false and v.Parent:FindFirstChild("EnemyDefeat") ~= true then
         HRP.CFrame = v.CFrame
      end
   end
end)

getgenv().stopautotpmobloop = false

ASection:NewDropdown("Autoteleport To Mob", "Automatically teleports you to the mob selected", Mobs, function(CurrentOption)
spawn(function()
    while not stopautotpmobloop and wait(0.5) do
local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
local Enemies = workspace.Enemies:GetDescendants()
        if getgenv().stopautotpmobloop == true then
            break
        end
    local CombatFolder = workspace:FindFirstChild("CombatFolder")
        if CombatFolder == nil then
            for i,v in next, Enemies do 
                if v.Parent.Name == "Enemy" and v:IsA("BasePart") and v.Name == "EnemyLocation" and tostring(v.Parent.Model.Value) == CurrentOption and v.Parent.InCombat.Value == false and v.Parent:FindFirstChild("EnemyDefeat") ~= true then
                    HRP.CFrame = v.CFrame
                    break
                end
            end
        end
    end
end)
end)

ASection:NewButton("Stop AutoMobTP", "Stops automatically teleporting to the mob selected", function()
getgenv().stopautotpmobloop = true
wait(0.4)
getgenv().stopautotpmobloop = false
end)

ASection:NewButton("GodMode", "Activates GodMode", function()
    local Remote = game:GetService("ReplicatedStorage"):FindFirstChild("DamageNew", true)
    local Player = game:GetService("Players").LocalPlayer
    local OldNameCall = nil
OldNameCall = hookmetamethod(game, "__namecall", function(self, ...)
   local Args = {...}
   local Self = Args[1]
       if self == Remote and Args[1] == Player.Character then
           return
       end
   return OldNameCall(self, unpack(Args))
end)
end)

local Tp = true

ASection:NewToggle("Auto OrbTP", "Teleports you to orbs automatically (portal relic)", function(State)
    Tp = State
task.spawn(function()
    while Tp and wait(0.1) do
	local MyFol
        local CombatFolder = workspace:FindFirstChild("CombatFolder")
        if CombatFolder ~= nil and CombatFolder:FindFirstChild(Player.Name) then
	    local Player = game:GetService("Players").LocalPlayer	
            local Character = Player.Character or Player.CharacterAdded:Wait()
            local HRP = Character:FindFirstChild("HumanoidRootPart")
            MyFol = CombatFolder:FindFirstChild(Player.Name):GetDescendants()
	    if MyFol then
            for i,v in pairs(MyFol) do
                if v:IsA("BasePart") and v.Name == "HitBox" or v.Name == "Base" then
                    HRP.CFrame = v.CFrame
                end
            end
	end
        end
    end
end)
end)

local Acts = true

ASection:NewToggle("Spam All Actives", "Spams all Actives", function(State)
Acts = State

while Acts and wait() do
local args = {
[1] = "UseItem",
[2] = 1,
[3] = { ["MouseHit"] = Vector3.new(-46,50,43)}
}

game:GetService("ReplicatedStorage"):WaitForChild("Server"):FireServer(unpack(args))

local args = {
[1] = "UseItem",
[2] = 2,
[3] = { ["MouseHit"] = Vector3.new(-46,50,43)}
}

game:GetService("ReplicatedStorage"):WaitForChild("Server"):FireServer(unpack(args))

local args = {
[1] = "UseItem",
[2] = 3,
[3] = { ["MouseHit"] = Vector3.new(-46,50,43)}
} 
game:GetService("ReplicatedStorage"):WaitForChild("Server"):FireServer(unpack(args))
end
end)

ASection:NewButton("AntiAFK", "You will not get disconnected for idling", function()
for i,v in pairs(getconnections(game:GetService("Players").LocalPlayer.Idled)) do
   v:Disable()
end
end)

local BTab = Window:NewTab("Fruits/Trees/Pickups")
local BSection = BTab:NewSection("Fruits/Trees/Pickups")

local Mats = true
local MaterialGivers = game:GetService("Workspace"):FindFirstChild("MaterialGivers")

BSection:NewToggle("Gather Fruits", "Automatically gathers all fruits/trees", function(State)
    Mats = State
spawn(function()
while Mats and wait(0.1) do
           local Character = Player.Character or Player.CharacterAdded:Wait()
           local HRP = Character:FindFirstChild("HumanoidRootPart")
        for i,v in pairs(MaterialGivers:GetDescendants()) do
            if v:IsA("BasePart") and v.Parent.Parent.Parent == MaterialGivers then
               firetouchinterest(HRP,v,0)
               firetouchinterest(HRP,v,1)
            end
        end
    end
end)
end)

BSection:NewButton("Teleport To A Blue Star", "Teleports you to a blue star if it exists", function()
local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
local WorkspaceD = workspace:GetDescendants()
   for i,v in next, WorkspaceD do 
      if v.Parent.Name == "Models" and v.Name == "BlueStar" and v.Parent.Parent.Parent == workspace then
         HRP.CFrame = v.CFrame
      end
   end
end)

BSection:NewButton("Teleport To A Star", "Teleports you to a star if it exists", function()
local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
local WorkspaceD = workspace:GetDescendants()
   for i,v in next, WorkspaceD do 
      if v.Parent.Name == "Models" and v.Name == "Star" and v.Parent.Parent.Parent == workspace then
         HRP.CFrame = v.CFrame
      end
   end
end)

BSection:NewButton("Teleport To A Graveshard Grave", "Teleports you to a Grave if it exists (Mining Pickaxe)", function()
local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
local WorkspaceD = workspace:GetDescendants()
   for i,v in next, WorkspaceD do 
      if v.Name == "Hitbox" and v.Parent == workspace then
         HRP.CFrame = v.CFrame
      end
   end
end)


BSection:NewButton("Teleport To A Dragonball", "Teleports you to a dragonball if it exists", function()
local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
local WorkspaceD = workspace:GetDescendants()
   for i,v in next, WorkspaceD do 
      if v.Name == "Middle" and v.Parent.Parent == workspace and v.Parent.Name == "DragonBall" then
         HRP.CFrame = v.CFrame
      end
   end
end)

BSection:NewButton("Teleport To A Lily", "Teleports you to a lily if it exists", function()
local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
local WorkspaceD = workspace:GetDescendants()
   for i,v in next, WorkspaceD do 
      if v.Name == "Middle" and v.Parent.Parent == workspace and v.Parent.Name == "Lily" then
         HRP.CFrame = v.CFrame
      end
   end
end)

BSection:NewButton("Teleport To A Deathbush/SweetLoveBush", "Teleports you to a Deathbush if it exists", function()
local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
local WorkspaceD = workspace:GetDescendants()
   for i,v in next, WorkspaceD do 
      if v.Name == "Middle" and v.Parent.Parent == workspace and v.Parent.Name == "DeathBush" then
         HRP.CFrame = v.CFrame
      end
   end
end)

local CTab = Window:NewTab("Teleport")
local CSection = CTab:NewSection("Teleport")

local ArsenalTab = {}
local Arsenals = workspace:WaitForChild("Arsenals"):GetDescendants()

for i,v in pairs(Arsenals) do
    if v:IsA("BasePart") and v.Parent.Parent.Name == "Arsenals" then
        if not table.find(ArsenalTab,v.Parent.Name) then
            table.insert(ArsenalTab,v.Parent.Name)
        end
    end
end

table.insert(ArsenalTab,"Void")
table.insert(ArsenalTab,"Land Under The Waterfall")
table.sort(ArsenalTab)

CSection:NewDropdown("Teleport To Arsenal", "Teleports you to the selected arsenal", ArsenalTab, function(CurrentOption)
    local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
    if CurrentOption == "Land Under The Waterfall" then
        HRP.CFrame = CFrame.new(-19912,-110,-6258)
    elseif CurrentOption == "Void" then
        HRP.CFrame = CFrame.new(-19396,-73,-4085)
    else
        HRP.CFrame = workspace.Arsenals:FindFirstChild(CurrentOption):FindFirstChild("Base").CFrame
    end
end)

local NPCs = {}
table.insert(NPCs,"Smile (Hyper)")
table.insert(NPCs,"Bottle of ??? (Hunter)")
table.insert(NPCs,"Blind Grillby (Burning Head)")
table.insert(NPCs,"Cursed Altar (Cursed)")
table.insert(NPCs,"Gabriel (Ocean Glider)")
table.insert(NPCs,"Green Light Green Light (Portal)")
table.insert(NPCs,"Gears (Time Grinders)")
table.insert(NPCs,"Mixed Letter (Ghoul)")
table.insert(NPCs,"Holy Cross (Holy)")
table.insert(NPCs,"Bottle (Gravity Boots)")
table.insert(NPCs,"Ancient Paw (Pull)")
table.insert(NPCs,"Noob (Torch)")
table.insert(NPCs,"Broski (Bounty Hunter)")
table.insert(NPCs,"Jeff (Berserk)")
table.insert(NPCs,"Gem (Crystalized)")
table.insert(NPCs,"Avatar of Radismus (Blood Wipe)")


CSection:NewDropdown("Teleport To Chosen Relic NPC", "Teleports you to the chosen Relic NPC", NPCs, function(CurrentOption)
local HRP = game:GetService("Players").LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if CurrentOption == "Bottle of ??? (Hunter)" then HRP.CFrame = CFrame.new(-1040.1, 195.214, -4722.89)
    elseif CurrentOption == "Blind Grillby (Burning Head)" then HRP.CFrame = CFrame.new(156.598, 162.562, -2334.68)
    elseif CurrentOption == "Cursed Altar (Cursed)" then HRP.CFrame = CFrame.new(-201.773, -98.5357, 2893.72)
    elseif CurrentOption == "Gabriel (Ocean Glider)" then HRP.CFrame = CFrame.new(1721.16, 4.14446, -5437.34)
    elseif CurrentOption == "Green Light Green Light (Portal)" then HRP.CFrame = CFrame.new(-529.14,-92.2,2063.35)
    elseif CurrentOption == "Gears (Time Grinders)" then HRP.CFrame = CFrame.new(-1848,203.5,-3941.5)
    elseif CurrentOption == "Mixed Letter (Ghoul)" then HRP.CFrame = CFrame.new(-1092.88, -101, 2155.55)
    elseif CurrentOption == "Holy Cross (Holy)" then HRP.CFrame = CFrame.new(-1275, 493, 67)
    elseif CurrentOption == "Bottle (Gravity Boots)" then HRP.CFrame = CFrame.new(5319.36, 13.2782, -8510.45)
    elseif CurrentOption == "Ancient Paw (Pull)" then HRP.CFrame = CFrame.new(-904, 70, -2592.5)
    elseif CurrentOption == "Noob (Torch)" then HRP.CFrame = CFrame.new(-124.406, 43.0267, -415.472)
    elseif CurrentOption == "Broski (Bounty Hunter)" then HRP.CFrame = CFrame.new(569.595, 194.855, -2082.55)
    elseif CurrentOption == "Jeff (Berserk)" then HRP.CFrame = CFrame.new(311.894, 66.9847, -1380.45)
    elseif CurrentOption == "Gem (Crystalized)" then HRP.CFrame = CFrame.new(681.1, 34.6, -1334.6)
    elseif CurrentOption == "Avatar of Radismus (Blood Wipe)" then HRP.CFrame = CFrame.new(5230.36, 384.857, 1645.1)
    elseif CurrentOption == "Smile (Hyper)" then HRP.CFrame = CFrame.new(-1201, -123, 2573)
    end
end)

CSection:NewButton("Teleport To Blackmarket", "Teleports the player to blackmarket", function()
    local BlackMarket = workspace:FindFirstChild("Stalls"):FindFirstChild("Black Market"):GetDescendants()
for i,v in pairs(BlackMarket) do
if v.Name == "Grani" and v.Parent.Parent.Name == "Grani" then
	local HRP = game:GetService("Players").LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
HRP.CFrame = v.CFrame
end
end
end)

CSection:NewButton("Teleport To Vanessa", "Teleports the player to Vanessa(bluemoon fairy)", function()
local fairy = workspace:FindFirstChild("Vanessa")
if fairy ~= nil then
local LocalPlayer = game:GetService("Players").LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HRP = Character:FindFirstChild("HumanoidRootPart")
HRP.CFrame = fairy.HumanoidRootPart.CFrame
end
end)

local Players = game:GetService("Players"):GetChildren()
local onJoinList = {}
local updateList = {}

local LocalPlayer = game:GetService("Players").LocalPlayer

for i,v in pairs(Players) do
    if not table.find(onJoinList,v.Name) and v.Name ~= LocalPlayer.Name then
        table.insert(onJoinList,v.Name)
    end
end

local dropdown = CSection:NewDropdown("Teleport To Player", "Teleports you to the player selected", onJoinList, function(CurrentOption)
local HRP = Player.Character:FindFirstChild("HumanoidRootPart")
local Players = game:GetService("Players"):GetChildren()
   for i,v in next, Players do 
      if v.Name == CurrentOption then
         HRP.CFrame = v.Character:FindFirstChild("HumanoidRootPart").CFrame
      end
   end
end)

CSection:NewButton("Update Playerlist", "Refreshes Playerlist", function()
local Players = game:GetService("Players"):GetChildren()
for i,v in pairs(Players) do
    if not table.find(updateList,tostring(v.Name)) and v.Name ~= LocalPlayer.Name then
        table.insert(updateList,tostring(v.Name))
    end
end
  dropdown:Refresh(updateList)
end)

local DTab = Window:NewTab("Other")
local DSection = DTab:NewSection("Other")

DSection:NewKeybind("Toggle UI Button", "Toggle UI Button", Enum.KeyCode.LeftControl, function()
	Library:ToggleUI()
end)

DSection:NewButton("Infinite Combo ComboSword", "Infinite Combo on any tier of ComboSword", function()
    -- Variable
local Player = game.Players.LocalPlayer
local De = game:GetService("Debris")

-- Function
function InfCombo(Plr)
    local head = Plr:WaitForChild("Head")
    head.DescendantAdded:Connect(function(v)
        if v:IsA("Script") then
            De:AddItem(v,0.5)
        end
    end)
end

-- Connect
player.CharacterAdded:Connect(InfCombo)
InfCombo(Player.Character)
end)

DSection:NewButton("InfiniteYield", "InfiniteYield", function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
end)

DSection:NewButton("Open all Chests", "Opens all the chests", function()
    local Chests = workspace:FindFirstChild("Chests"):GetDescendants()
local HRP = game:GetService("Players").LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
for i,v in pairs (Chests) do
if v.Name == "TouchInterest" and v.Parent.Name == "Giver" and v.Parent.Parent.Parent.Name == "Chests" and v.Parent.Parent.Parent:IsA("Folder") then
firetouchinterest(HRP,v.Parent,0)
firetouchinterest(HRP,v.Parent,1)
end
end
end)
